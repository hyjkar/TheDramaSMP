<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>BD Tour Alicante 2026</title>

    <link rel="apple-touch-icon" sizes="180x180" href="icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="icon.png">
    <link rel="icon" type="image/png" sizes="16x16" href="icon.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Lato:wght@300;400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        golf: {
                            dark: '#0A2615',   /* Augusta Green */
                            deep: '#1B4D3E',   /* Secondary Green */
                            gold: '#C5A059',   /* Trophy Gold */
                            cream: '#F5F5F0',  /* Card Stock */
                            white: '#FFFFFF'
                        }
                    },
                    fontFamily: {
                        serif: ['"Playfair Display"', 'serif'],
                        sans: ['"Lato"', 'sans-serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* --- SMART SCROLL LOGIC --- */
        html, body {
            height: 100%; /* Force full height */
            width: 100%;
            overflow: hidden; /* Prevent the 'background' from moving */
            background-color: #F5F5F0;
        }

        #app-container {
            height: 100%;
            width: 100%;
            /* 'auto' means: scrollbar appears ONLY if content is too big */
            overflow-y: auto; 
            /* 'none' means: never bounce or rubber-band */
            overscroll-behavior-y: none; 
            -webkit-overflow-scrolling: touch;
        }
        /* -------------------------- */

        /* Checkbox Styling */
        input[type="checkbox"]:checked + label {
            text-decoration: line-through;
            color: #9CA3AF;
        }
        
        /* Editor Styles */
        .rich-editor {
            min-height: 80px;
            max-height: 200px;
            overflow-y: auto;
            background-color: white;
            /* Allow scrolling inside the editor box */
            overscroll-behavior-y: contain; 
        }
        .rich-editor:focus {
            outline: 2px solid #C5A059;
        }

        /* Accordion Animation */
        .accordion-content {
            transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;
            max-height: 0;
            opacity: 0;
            overflow: hidden;
        }
        .accordion-content.open {
            max-height: 1000px; 
            opacity: 1;
        }
        .arrow-icon {
            transition: transform 0.3s ease;
        }
        .arrow-icon.rotate {
            transform: rotate(180deg);
        }

        #landscape-warning { display: none; }
        @media screen and (orientation: landscape) {
            #app-container { display: none; }
            #landscape-warning { display: flex; }
        }
    </style>
</head>
<body class="bg-golf-cream text-gray-800 font-sans antialiased">

    <div id="landscape-warning" class="fixed inset-0 bg-golf-dark z-[100] flex flex-col items-center justify-center text-golf-gold p-10 text-center">
        <div class="text-6xl mb-4">‚ü≥</div>
        <h2 class="font-serif text-3xl mb-2">Portrait Mode Only</h2>
    </div>

    <div id="app-container" class="max-w-md mx-auto bg-golf-cream shadow-2xl relative flex flex-col">

        <header class="bg-golf-dark pt-10 pb-8 px-6 text-center rounded-b-[30px] shadow-lg z-10 relative overflow-hidden shrink-0">
            
            <svg class="absolute bottom-0 right-0 w-48 h-auto opacity-10 pointer-events-none text-golf-gold transform translate-x-4 translate-y-2" viewBox="0 0 200 200" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                <path d="M40 40 L160 40 L100 120 L100 180 M70 180 L130 180" stroke="currentColor" stroke-width="8" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                <circle cx="100" cy="80" r="20" fill="currentColor"/>
                <line x1="100" y1="80" x2="140" y2="20" stroke="currentColor" stroke-width="4" stroke-linecap="round"/>
                <circle cx="95" cy="75" r="2" fill="white" opacity="0.5"/>
                <circle cx="105" cy="75" r="2" fill="white" opacity="0.5"/>
                <circle cx="100" cy="85" r="2" fill="white" opacity="0.5"/>
            </svg>

            <div class="relative z-10">
                <h1 class="font-serif text-2xl text-white tracking-wide leading-tight drop-shadow-md">
                    BD TOUR<br>
                    <span class="text-golf-gold italic text-xl">Alicante 2026</span>
                </h1>
                
                <button onclick="document.getElementById('packing-modal').classList.remove('hidden')" class="mt-4 bg-golf-deep border border-golf-gold text-golf-gold text-[10px] uppercase tracking-widest py-1.5 px-6 rounded-full hover:bg-black transition flex items-center justify-center mx-auto gap-2 shadow-lg">
                    <span>‚úì</span> Packing List
                </button>
            </div>
        </header>

        <main class="p-4 space-y-3 pb-24">
            
            <div class="bg-white rounded-sm border-t-2 border-golf-gold shadow-sm overflow-hidden">
                <button onclick="toggleAccordion('acc-flight', 'arrow-flight')" class="w-full flex justify-between items-center p-4 bg-white hover:bg-gray-50 transition">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">‚úàÔ∏è</span>
                        <h3 class="font-serif text-base text-golf-deep font-bold">Flight Plan</h3>
                    </div>
                    <svg id="arrow-flight" class="arrow-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="acc-flight" class="accordion-content border-t border-gray-100">
                    <div class="p-4 pt-2">
                        <div id="view-flight" class="text-xs leading-relaxed text-gray-600 whitespace-pre-line">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-sm border-t-2 border-golf-dark shadow-sm overflow-hidden">
                <button onclick="toggleAccordion('acc-rounds', 'arrow-rounds')" class="w-full flex justify-between items-center p-4 bg-white hover:bg-gray-50 transition">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">‚õ≥</span>
                        <h3 class="font-serif text-base text-golf-deep font-bold">Golf Rounds</h3>
                    </div>
                    <svg id="arrow-rounds" class="arrow-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="acc-rounds" class="accordion-content border-t border-gray-100">
                    <div class="p-4 pt-2">
                        <div id="view-rounds" class="text-xs leading-relaxed text-gray-600 whitespace-pre-line">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-sm border-t-2 border-golf-gold shadow-sm overflow-hidden">
                <button onclick="toggleAccordion('acc-teams', 'arrow-teams')" class="w-full flex justify-between items-center p-4 bg-white hover:bg-gray-50 transition">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">üèÜ</span>
                        <h3 class="font-serif text-base text-golf-deep font-bold">Team Rosters</h3>
                    </div>
                    <svg id="arrow-teams" class="arrow-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="acc-teams" class="accordion-content border-t border-gray-100">
                    <div class="p-4 pt-2">
                        <div class="grid grid-cols-2 gap-4">
                            <div>
                                <h4 class="font-bold text-xs text-golf-gold uppercase mb-2 border-b border-gray-100 pb-1">Team 1</h4>
                                <div id="view-team1" class="text-xs leading-relaxed text-gray-600 whitespace-pre-line">Loading...</div>
                            </div>
                            <div>
                                <h4 class="font-bold text-xs text-golf-deep uppercase mb-2 border-b border-gray-100 pb-1">Team 2</h4>
                                <div id="view-team2" class="text-xs leading-relaxed text-gray-600 whitespace-pre-line">Loading...</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-sm border-t-2 border-golf-deep shadow-sm overflow-hidden">
                <button onclick="toggleAccordion('acc-hotel', 'arrow-hotel')" class="w-full flex justify-between items-center p-4 bg-white hover:bg-gray-50 transition">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">üè®</span>
                        <h3 class="font-serif text-base text-golf-deep font-bold">Accommodation</h3>
                    </div>
                    <svg id="arrow-hotel" class="arrow-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="acc-hotel" class="accordion-content border-t border-gray-100">
                    <div class="p-4 pt-2">
                        <div id="view-hotel" class="text-xs leading-relaxed text-gray-600 whitespace-pre-line">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-sm border-t-2 border-golf-gold shadow-sm overflow-hidden">
                <button onclick="toggleAccordion('acc-dinner', 'arrow-dinner')" class="w-full flex justify-between items-center p-4 bg-white hover:bg-gray-50 transition">
                    <div class="flex items-center gap-3">
                        <span class="text-xl">üçΩÔ∏è</span>
                        <h3 class="font-serif text-base text-golf-deep font-bold">Dining & Events</h3>
                    </div>
                    <svg id="arrow-dinner" class="arrow-icon w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </button>
                <div id="acc-dinner" class="accordion-content border-t border-gray-100">
                    <div class="p-4 pt-2">
                        <div id="view-dinner" class="text-xs leading-relaxed text-gray-600 whitespace-pre-line">Loading...</div>
                    </div>
                </div>
            </div>

            <div class="text-center pt-6 pb-2">
                <button onclick="document.getElementById('login-modal').classList.remove('hidden')" class="text-[9px] text-gray-300 hover:text-golf-gold uppercase tracking-widest opacity-50 mb-2">
                    Chairman Access
                </button>
                <p class="text-[9px] text-gray-300">
                    Last sync: <span id="last-sync">...</span>
                </p>
            </div>
        </main>
    </div>

    <div id="packing-modal" class="hidden fixed inset-0 bg-golf-dark/95 z-50 flex flex-col items-center justify-center p-6 backdrop-blur-sm">
        <div class="bg-white w-full max-w-sm rounded-sm shadow-2xl overflow-hidden flex flex-col max-h-[80vh]">
            <div class="bg-golf-gold p-3 text-center">
                <h2 class="font-serif text-lg font-bold text-golf-dark">Packing List</h2>
            </div>
            <div class="p-6 overflow-y-auto space-y-3">
                <div class="flex items-center gap-3"><input type="checkbox" id="item1" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item1" class="cursor-pointer">Illallisvaatteet</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item2" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item2" class="cursor-pointer">Golfvaatteet</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item3" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item3" class="cursor-pointer">Golfpalloja</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item4" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item4" class="cursor-pointer">Teet</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item5" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item5" class="cursor-pointer">Mailat</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item6" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item6" class="cursor-pointer">Matkustusasiakirja</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item7" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item7" class="cursor-pointer">Golfkeng√§t</label></div>
                <div class="flex items-center gap-3"><input type="checkbox" id="item8" class="w-5 h-5 accent-golf-deep rounded cursor-pointer" onchange="saveChecklist()"><label for="item8" class="cursor-pointer">Golfhanskat</label></div>
            </div>
            <button onclick="document.getElementById('packing-modal').classList.add('hidden')" class="bg-gray-100 p-3 text-center text-xs font-bold text-gray-500 hover:bg-gray-200 uppercase tracking-wide">
                Close
            </button>
        </div>
    </div>

    <div id="login-modal" class="hidden fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-6">
        <div class="bg-white w-full max-w-xs p-8 rounded-sm shadow-2xl text-center">
            <h2 class="font-serif text-2xl text-golf-dark mb-6">Chairman Login</h2>
            <input type="email" id="email" placeholder="Email" class="w-full bg-gray-50 border-b-2 border-gray-200 p-3 mb-4 outline-none">
            <input type="password" id="password" placeholder="Password" class="w-full bg-gray-50 border-b-2 border-gray-200 p-3 mb-6 outline-none">
            <button id="btn-login" class="w-full bg-golf-dark text-golf-gold font-bold py-3 uppercase tracking-wider text-sm">Authenticate</button>
            <button onclick="document.getElementById('login-modal').classList.add('hidden')" class="mt-4 text-xs text-gray-400 underline">Cancel</button>
        </div>
    </div>

    <div id="editor-panel" class="hidden fixed inset-0 bg-gray-100 z-[60] flex flex-col">
        
        <div class="bg-golf-deep text-white p-4 flex justify-between items-center shadow-md shrink-0">
            <h2 class="font-serif font-bold">Edit Itinerary</h2>
            <button onclick="document.getElementById('editor-panel').classList.add('hidden')" class="text-xs bg-black/20 px-3 py-1 rounded hover:bg-black/40">Close</button>
        </div>
        
        <div class="bg-gray-200 p-3 border-b border-gray-300 sticky top-0 z-20 flex justify-center shadow-sm">
            <button onmousedown="event.preventDefault(); format('strikeThrough')" class="bg-golf-gold text-golf-dark font-bold text-xs uppercase tracking-widest py-3 px-6 rounded shadow hover:brightness-110 w-full max-w-xs flex items-center justify-center gap-2">
                <span><s>ABC</s></span> Mark Selection as Done
            </button>
        </div>

        <div class="flex-1 overflow-y-auto p-6 space-y-6">
            
            <div>
                <label class="block text-xs font-bold text-golf-dark uppercase mb-1">Flight Plan</label>
                <div id="edit-flight" contenteditable="true" class="rich-editor w-full p-3 text-sm border rounded"></div>
            </div>

            <div>
                <label class="block text-xs font-bold text-golf-dark uppercase mb-1">Golf Rounds</label>
                <div id="edit-rounds" contenteditable="true" class="rich-editor w-full p-3 text-sm border rounded"></div>
            </div>

            <div class="grid grid-cols-2 gap-2">
                <div>
                    <label class="block text-xs font-bold text-golf-dark uppercase mb-1">Team 1</label>
                    <div id="edit-team1" contenteditable="true" class="rich-editor w-full p-2 text-sm border rounded"></div>
                </div>
                <div>
                    <label class="block text-xs font-bold text-golf-dark uppercase mb-1">Team 2</label>
                    <div id="edit-team2" contenteditable="true" class="rich-editor w-full p-2 text-sm border rounded"></div>
                </div>
            </div>

            <div>
                <label class="block text-xs font-bold text-golf-dark uppercase mb-1">Accommodation</label>
                <div id="edit-hotel" contenteditable="true" class="rich-editor w-full p-3 text-sm border rounded"></div>
            </div>

            <div>
                <label class="block text-xs font-bold text-golf-dark uppercase mb-1">Dining</label>
                <div id="edit-dinner" contenteditable="true" class="rich-editor w-full p-3 text-sm border rounded"></div>
            </div>

            <button id="btn-save" class="w-full bg-golf-deep text-white font-bold py-4 rounded shadow-lg text-sm uppercase tracking-widest mt-4 mb-10">
                Save Updates Live
            </button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, doc, onSnapshot, updateDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        // üî•üî•üî• PASTE FIREBASE CONFIG HERE üî•üî•üî•
        const firebaseConfig = {
apiKey: "AIzaSyBQZPcQ6FcnglNHg10d__6PQDdd_OjT74U",
authDomain: "golfapp-10c53.firebaseapp.com",
projectId: "golfapp-10c53",
storageBucket: "golfapp-10c53.firebasestorage.app",
messagingSenderId: "251112200135",
appId: "1:251112200135:web:6b1d0386a2cc042ae8abe2"
        };
        // üî•üî•üî• END PASTE üî•üî•üî•

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const tripRef = doc(db, "trip", "details");

        // GLOBAL FUNCTION FOR FORMATTING
        window.format = function(command) {
            document.execCommand(command, false, null);
        };

        // GLOBAL FUNCTION FOR ACCORDION (EXCLUSIVE MODE)
        window.toggleAccordion = function(contentId, arrowId) {
            const clickedContent = document.getElementById(contentId);
            const clickedArrow = document.getElementById(arrowId);
            
            const isAlreadyOpen = clickedContent.classList.contains('open');

            const allContents = document.querySelectorAll('.accordion-content');
            const allArrows = document.querySelectorAll('.arrow-icon');
            
            allContents.forEach(el => el.classList.remove('open'));
            allArrows.forEach(el => el.classList.remove('rotate'));

            if (!isAlreadyOpen) {
                clickedContent.classList.add('open');
                clickedArrow.classList.add('rotate');
            }
        };

        // 1. DATA LISTENER
        onSnapshot(tripRef, (doc) => {
            if (doc.exists()) {
                const data = doc.data();
                
                const now = new Date();
                document.getElementById('last-sync').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

                // View Mode
                document.getElementById('view-flight').innerHTML = data.flights || "Details pending...";
                document.getElementById('view-rounds').innerHTML = data.rounds || "Course details pending...";
                document.getElementById('view-team1').innerHTML = data.team1 || "Roster pending...";
                document.getElementById('view-team2').innerHTML = data.team2 || "Roster pending...";
                document.getElementById('view-hotel').innerHTML = data.hotel || "Details pending...";
                document.getElementById('view-dinner').innerHTML = data.dinner || "Details pending...";
                
                // Edit Mode
                document.getElementById('edit-flight').innerHTML = data.flights || "";
                document.getElementById('edit-rounds').innerHTML = data.rounds || "";
                document.getElementById('edit-team1').innerHTML = data.team1 || "";
                document.getElementById('edit-team2').innerHTML = data.team2 || "";
                document.getElementById('edit-hotel').innerHTML = data.hotel || "";
                document.getElementById('edit-dinner').innerHTML = data.dinner || "";
            }
        });

        // 2. LOGIN
        document.getElementById('btn-login').addEventListener('click', async () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            try {
                await signInWithEmailAndPassword(auth, email, pass);
                document.getElementById('login-modal').classList.add('hidden');
                document.getElementById('editor-panel').classList.remove('hidden');
            } catch (error) {
                alert("Access Denied.");
            }
        });

        // 3. SAVE
        document.getElementById('btn-save').addEventListener('click', async () => {
            const btn = document.getElementById('btn-save');
            btn.innerText = "Saving...";
            try {
                await updateDoc(tripRef, {
                    flights: document.getElementById('edit-flight').innerHTML,
                    rounds: document.getElementById('edit-rounds').innerHTML,
                    team1: document.getElementById('edit-team1').innerHTML,
                    team2: document.getElementById('edit-team2').innerHTML,
                    hotel: document.getElementById('edit-hotel').innerHTML,
                    dinner: document.getElementById('edit-dinner').innerHTML
                });
                document.getElementById('editor-panel').classList.add('hidden');
            } catch (error) {
                alert("Error saving: " + error.message);
            }
            btn.innerText = "Save Updates Live";
        });

        // 4. PACKING LIST
        window.saveChecklist = function() {
            const checkboxes = document.querySelectorAll('#packing-modal input[type="checkbox"]');
            const state = {};
            checkboxes.forEach(box => {
                state[box.id] = box.checked;
            });
            localStorage.setItem('golfPackingList', JSON.stringify(state));
        }

        window.addEventListener('load', () => {
            const savedState = JSON.parse(localStorage.getItem('golfPackingList'));
            if (savedState) {
                for (const [id, isChecked] of Object.entries(savedState)) {
                    const box = document.getElementById(id);
                    if (box) box.checked = isChecked;
                }
            }
        });
    </script>
</body>
</html>
